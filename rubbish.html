<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
</html>
<script>
    //垃圾回收
    //JavaScript是使用垃圾回收的语言，在代码执行时，会自动的管理内存，会将用完之后不会再使用的变量进行销毁，供后面的变量使用。
    var a = 1
    function ab(){
        var b = 1//当程序执行完之后，var b就会被销毁。
    }
    // 但销毁的过程中，
    // 程序往往不能准确的确定哪个变量不会再使用，
    // 所以出现了两种主要的标记策略：标记策略和引用计数。

    //标记策略
    //垃圾回收程序执行时，
   // 会将所以在上下文中的变量的标记全部去掉，
    //之后再被加上的标记就是代删除的，原因是没有东西开业访问到他们，
    //之后就会执行内存清理。

    //引用计数
    //其思路：声明变量并赋了一个引用值，那引用值就为1，如果被覆盖了，那就-1，当引用值为0时，他就会释放为0的值的内存。
    //这种方法会出现的问题
    function pro(){
        let pro1 = new Object();
        let pro2 = new Object();

        pro1.some = pro2;
        pro2.any = pro1
    }
    //这种对象pro1里面有一个pro2的指针，pro2里面有一个pro1的指针的东西，叫做循环引用。
    //他们之间互相引用，所以引用值都是2，在标记清理中，因为他们都不在作用域中，会自动销毁，
    //而在引用计数中，因为他们互相引用，所以一直都不可能是0，所以不会被销毁，会占用内存。

    //性能
    //如果你的页面中包含的变量，对象/数组或者字符串过多，那么就会严重影响页面的加载及渲染，。

    //内存管理
    //JavaScript的内存分配：当大量的JavaScript脚本执行在页面中时，会有可能导致操作系统的崩溃，所以JavaScript分配的移动端的内存就很少，这样才可以更好的优化页面。
    //为了能更好的优化页面的性能，最好的手段就是使用解除引用，这种技术可以更好的释放内存。
    function cr(name){
        let loc = new Object();
        loc.name = "a";
        return loc
    }
    let gl = cr('e');
    gl =null;//这里就是解除引用，当他的作用使用完了之后，就可以设置null。
    //如何能更好的优化内存
    //1.多使用const和let
    //2.隐藏类和删除操作
    //3.防止内存泄漏
    //4.静态分配与对象池
</script>